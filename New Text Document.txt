import org.apache.jmeter.threads.JMeterContextService;
import org.apache.jmeter.samplers.SampleResult;

int maxResponseTime = 50; // ms
double avgResponseTime = 0;

SampleResult[] results = JMeterContextService.getJMeterContext().getResults();

if (results != null && results.length > 0) {
    for(SampleResult result : results) {
        avgResponseTime += result.getTime();
    }

    avgResponseTime /= results.length;

    if(avgResponseTime > maxResponseTime) {
        Failure = true;
        FailureMessage = "MÃ©dia de tempo de resposta " + avgResponseTime + "ms excedeu 50ms";
    }
}
