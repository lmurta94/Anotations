String metrics = prev.getResponseDataAsString();
String responseTimeMetric = "";
for (String line : metrics.split("\n")) {
    if (line.contains("http_server_requests_seconds_mean{method=\"GET\",uri=\"/customers\"")) {
        responseTimeMetric = line.split()[1];
        break;
    }
}
vars.put("meanResponseTime", responseTimeMetric);

// Conversão de segundos para milissegundos e comparação
float responseTimeMs = Float.parseFloat(responseTimeMetric) * 1000;
if (responseTimeMs > 50) {
    Failure = true;
    FailureMessage = "Response time " + responseTimeMs + "ms exceeds 50ms";
}




${__groovy(
  def metrics = prev.getResponseDataAsString();
  def responseTimeMetric = metrics.findAll { 
    it.contains('http_server_requests_seconds_mean{method="GET",uri="/customers"')
  }.first();
  vars.put("meanResponseTime", responseTimeMetric.split()[1]);
)}
